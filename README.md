# Bilibili视频下载器

这是一个用于下载Bilibili视频的工具，支持音视频分离下载，并提供一个简单的Web前端界面以及Edge浏览器扩展。

## 功能

*   **视频下载**: 支持通过Bilibili视频URL下载视频。
*   **音视频分离**: 视频和音频文件将分别下载（视频为mp4，音频为m4a）。
*   **Web界面**: 提供一个基于Flask的简单Web界面，方便用户输入URL并查看下载进度。
*   **下载进度条**: Web界面显示实时下载进度。
*   **Edge浏览器扩展**: 可以作为Edge浏览器扩展使用，方便在浏览器中直接下载当前B站视频。

## 安装与运行

### 1. 后端服务 (Python Flask)

1.  **确保安装Python**: 如果您的系统没有安装Python，请先从 [Python官网](https://www.python.org/downloads/) 下载并安装。
2.  **运行启动脚本**: 双击运行项目根目录下的 `start.bat` 文件。
    *   此脚本会自动安装所有必要的Python库 (`yt-dlp` 和 `Flask`)。
    *   然后，它会启动Flask Web服务，并在默认浏览器中自动打开Web界面 (`http://127.0.0.1:5000`)。
    *   请保持此命令行窗口开启，以便后端服务持续运行。

### 2. Web界面使用

1.  在浏览器中访问 `http://127.0.0.1:5000` (如果 `start.bat` 没有自动打开)。
2.  在输入框中粘贴Bilibili视频的URL。
3.  点击“下载”按钮。
4.  下载进度和状态将显示在页面上。下载的视频和音频文件将保存在项目根目录下的 `downloads` 文件夹中。

### 3. Edge浏览器扩展 (可选)

如果您希望将此工具作为Edge浏览器扩展使用，请按照以下步骤操作：

1.  **准备图标文件**: 在 `icons` 文件夹中放入以下三个PNG图标文件（如果它们是占位符）：
    *   `icon16.png` (16x16像素)
    *   `icon48.png` (48x48像素)
    *   `icon128.png` (128x128像素)
2.  **打开Edge浏览器**。
3.  **进入扩展管理页面**: 在地址栏输入 `edge://extensions` 并回车。
4.  **开启开发者模式**: 在扩展管理页面的右上角，打开“开发者模式”开关。
5.  **加载解压缩的扩展**: 点击“加载解压缩的扩展”按钮。
6.  **选择扩展目录**: 浏览并选择 `f:/bilidown` 目录（即包含 `manifest.json` 文件的目录）。
7.  **完成加载**: 扩展加载成功后，您应该能在Edge浏览器的工具栏中看到Bilibili视频下载器的图标。点击图标即可打开下载器界面。

**重要提示**: 浏览器扩展本身无法直接启动Python后端服务。因此，您需要始终先运行 `start.bat` 来启动后端服务，然后才能使用Edge扩展进行下载。

## 项目结构

```
.
├── bilidown.py         # Flask后端服务和yt-dlp下载逻辑
├── index.html          # Web前端页面
├── style.css           # Web前端样式
├── script.js           # Web前端交互逻辑
├── manifest.json       # Edge浏览器扩展清单文件
├── start.bat           # Windows启动脚本，用于安装依赖和启动后端服务
├── downloads/          # 下载的视频和音频文件将保存在此目录
└── icons/              # 浏览器扩展图标
    ├── icon16.png
    ├── icon48.png
    └── icon128.png
